import{w as y,p as e,a as p,t as i}from"./chunk-PVWAREVJ-C9qE2fA-.js";import{u as h}from"./useQuery-9Bb2aqof.js";import{Q as u,a as b}from"./QueryClientProvider-CkIEaHTJ.js";import{s as j}from"./supabaseClient-BIEPa1cA.js";import{P as f}from"./ProtectedRoute-C6dujsSR.js";import"./AuthContext-BGMu_9un.js";async function N(){const{data:t,error:n}=await j.from("meal_templates").select("*").order("created_at",{ascending:!1});if(n)throw n;return t.map(v)}function v(t){return{id:t.id,name:t.name,meal_type:t.meal_type,person:t.person,is_fixed:t.is_fixed,ingredients:t.ingredients??[],notes:t.notes??void 0,created_at:t.created_at,updated_at:t.updated_at}}const k=new u;function _(){const[t,n]=p.useState("adult"),{data:c,isLoading:m,error:o}=h({queryKey:["mealTemplates"],queryFn:N}),l=c?.filter(a=>a.person===t)?.reduce((a,s)=>(a[s.meal_type]||(a[s.meal_type]=[]),a[s.meal_type].push(s),a),{}),x=["pre-breakfast","smoothie","breakfast","snack","lunch","dinner"];return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[e.jsx("nav",{className:"bg-gray-900 dark:bg-gray-800 px-4 py-3 sticky top-0 z-10",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"â† Home"}),e.jsx("span",{className:"text-gray-500",children:"|"}),e.jsx(i,{to:"/food-planning/meal-plan",className:"text-blue-400 font-semibold",children:"Meal Plan"}),e.jsx(i,{to:"/food-planning/grocery-list",className:"text-gray-300 hover:text-white transition-colors",children:"Grocery List"})]})})}),e.jsxs("main",{className:"p-8 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Meal Templates"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your reusable meal templates"})]}),e.jsxs("div",{className:"flex gap-2 bg-gray-200 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("adult"),className:`px-4 py-2 rounded-md font-medium transition-colors ${t==="adult"?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:"Adult"}),e.jsx("button",{onClick:()=>n("toddler"),className:`px-4 py-2 rounded-md font-medium transition-colors ${t==="toddler"?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700"}`,children:"Toddler"})]})]}),m&&e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Loading meal templates..."})}),o&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error loading templates: ",o.message]})}),l&&Object.keys(l).length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:["No meal templates yet for ",t]}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mb-4",children:"Run the seed data SQL to populate your standard meals"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"+ Add Template"})]}),l&&Object.keys(l).length>0&&e.jsx("div",{className:"space-y-8",children:x.map(a=>{const s=l[a];return!s||s.length===0?null:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4 capitalize flex items-center gap-2",children:[a.replace("-"," "),s.some(r=>r.is_fixed)&&e.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:"Fixed"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(r=>e.jsxs("div",{className:`bg-gray-50 dark:bg-gray-800 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${r.is_fixed?"border-2 border-green-500":""}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name})}),r.ingredients.length>0&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.jsx("div",{className:"font-medium mb-1",children:"Ingredients:"}),e.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:r.ingredients.map((d,g)=>e.jsx("li",{children:d.quantity?`${d.quantity} ${d.name}`:d.name},g))})]}),r.notes&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-500 italic",children:r.notes})]},r.id))})]},a)})})]})]})}const Q=y(function(){return e.jsx(f,{children:e.jsx(b,{client:k,children:e.jsx(_,{})})})});export{Q as default};
