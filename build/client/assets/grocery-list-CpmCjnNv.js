import{w as x,p as e,t as c}from"./chunk-PVWAREVJ-C9qE2fA-.js";import{u as m}from"./useQuery-9Bb2aqof.js";import{Q as g,a as y}from"./QueryClientProvider-CkIEaHTJ.js";import{s as h}from"./supabaseClient-BIEPa1cA.js";import{P as u}from"./ProtectedRoute-C6dujsSR.js";import"./AuthContext-BGMu_9un.js";async function p(){const{data:r,error:i}=await h.from("grocery_list_items").select("*").order("category",{ascending:!0}).order("ingredient_name",{ascending:!0});if(i)throw i;return r.map(j)}function j(r){return{id:r.id,ingredient_name:r.ingredient_name,quantity:r.quantity??void 0,category:r.category??void 0,is_checked:r.is_checked,source_meal_id:r.source_meal_id??void 0,added_at:r.added_at,checked_at:r.checked_at??void 0}}const b=new g;function k(){const{data:r,isLoading:i,error:l}=m({queryKey:["groceryList"],queryFn:p}),d=r?.reduce((s,a)=>{const n=a.category||"Other";return s[n]||(s[n]=[]),s[n].push(a),s},{}),o=["Produce","Dairy","Meat","Pantry","Frozen","Other"];return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[e.jsx("nav",{className:"bg-gray-900 dark:bg-gray-800 px-4 py-3 sticky top-0 z-10",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{to:"/",className:"text-gray-300 hover:text-white transition-colors",children:"â† Home"}),e.jsx("span",{className:"text-gray-500",children:"|"}),e.jsx(c,{to:"/food-planning/meal-plan",className:"text-gray-300 hover:text-white transition-colors",children:"Meal Plan"}),e.jsx(c,{to:"/food-planning/grocery-list",className:"text-blue-400 font-semibold",children:"Grocery List"})]})})}),e.jsxs("main",{className:"p-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Grocery List"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your shopping list"})]}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"+ Add Item"})]}),i&&e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:"Loading grocery list..."})}),l&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error loading grocery list: ",l.message]})}),r&&r.length===0&&e.jsxs("div",{className:"text-center py-12 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Your grocery list is empty"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mb-4",children:"Add items manually or generate from your meal plan"})]}),d&&Object.keys(d).length>0&&e.jsxs("div",{className:"space-y-6",children:[o.map(s=>{const a=d[s];if(!a||a.length===0)return null;const n=a.filter(t=>t.is_checked).length;return e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2",children:[s,e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-normal",children:["(",n,"/",a.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:a.map(t=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg ${t.is_checked?"bg-gray-100 dark:bg-gray-800":"bg-gray-50 dark:bg-gray-800/50"}`,children:[e.jsx("input",{type:"checkbox",checked:t.is_checked,onChange:()=>{},className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:`font-medium ${t.is_checked?"line-through text-gray-500 dark:text-gray-500":"text-gray-900 dark:text-gray-100"}`,children:[t.ingredient_name,t.quantity&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 ml-2",children:["(",t.quantity,")"]})]}),t.source_meal_id&&e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:"From meal plan"})]}),e.jsx("button",{className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},t.id))})]},s)}),e.jsx("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{className:"text-red-600 dark:text-red-400 hover:underline font-medium",children:"Clear Checked Items"})})]})]})]})}const w=x(function(){return e.jsx(u,{children:e.jsx(y,{client:b,children:e.jsx(k,{})})})});export{w as default};
