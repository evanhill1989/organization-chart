import{a as p,p as t,t as ue,w as Nt,x as Ct,y as Tt}from"./chunk-PVWAREVJ-C9qE2fA-.js";import{Q as He,a as St,b as _t,e as Rt,c as Dt,d as Mt,s as Le,f as Ee,w as At,g as Lt,u as he}from"./useQuery-jVOp7vHI.js";import{S as Et,n as we,r as Ot,u as ge,b as $t,k as Ve,Q as Pt,a as It}from"./QueryClientProvider-CC2Z6-5f.js";import{g as L}from"./index-DKtf60Sy.js";import{g as Ke,s as je,c as Oe,a as be,u as Je,Q as W,T as K,b as Ft,d as zt,e as qt,f as Te}from"./TaskForm-Cn-b2RD0.js";import{s as Q}from"./supabaseClient-Btf0BZYh.js";import{P as Ut}from"./ProtectedRoute-DvR4G2Fq.js";import{D as Ye}from"./DarkModeToggle-B8WQ3-QW.js";import"./AuthContext-CtIaUxkA.js";function $e(e,r){const o=new Set(r);return e.filter(s=>!o.has(s))}function Bt(e,r,o){const s=e.slice(0);return s[r]=o,s}var Qt=class extends Et{#s;#e;#o;#n;#t;#r;#a;#i;#l=[];constructor(e,r,o){super(),this.#s=e,this.#n=o,this.#o=[],this.#t=[],this.#e=[],this.setQueries(r)}onSubscribe(){this.listeners.size===1&&this.#t.forEach(e=>{e.subscribe(r=>{this.#m(e,r)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#t.forEach(e=>{e.destroy()})}setQueries(e,r){this.#o=e,this.#n=r,we.batch(()=>{const o=this.#t,s=this.#u(this.#o);this.#l=s,s.forEach(l=>l.observer.setOptions(l.defaultedQueryOptions));const n=s.map(l=>l.observer),a=n.map(l=>l.getCurrentResult()),i=n.some((l,c)=>l!==o[c]);o.length===n.length&&!i||(this.#t=n,this.#e=a,this.hasListeners()&&($e(o,n).forEach(l=>{l.destroy()}),$e(n,o).forEach(l=>{l.subscribe(c=>{this.#m(l,c)})}),this.#x()))})}getCurrentResult(){return this.#e}getQueries(){return this.#t.map(e=>e.getCurrentQuery())}getObservers(){return this.#t}getOptimisticResult(e,r){const o=this.#u(e),s=o.map(n=>n.observer.getOptimisticResult(n.defaultedQueryOptions));return[s,n=>this.#d(n??s,r),()=>this.#c(s,o)]}#c(e,r){return r.map((o,s)=>{const n=e[s];return o.defaultedQueryOptions.notifyOnChangeProps?n:o.observer.trackResult(n,a=>{r.forEach(i=>{i.observer.trackProp(a)})})})}#d(e,r){return r?((!this.#r||this.#e!==this.#i||r!==this.#a)&&(this.#a=r,this.#i=this.#e,this.#r=Ot(this.#r,r(e))),this.#r):e}#u(e){const r=new Map(this.#t.map(s=>[s.options.queryHash,s])),o=[];return e.forEach(s=>{const n=this.#s.defaultQueryOptions(s),a=r.get(n.queryHash);a?o.push({defaultedQueryOptions:n,observer:a}):o.push({defaultedQueryOptions:n,observer:new He(this.#s,n)})}),o}#m(e,r){const o=this.#t.indexOf(e);o!==-1&&(this.#e=Bt(this.#e,o,r),this.#x())}#x(){if(this.hasListeners()){const e=this.#r,r=this.#c(this.#e,this.#l),o=this.#d(r,this.#n?.combine);e!==o&&we.batch(()=>{this.listeners.forEach(s=>{s(this.#e)})})}}};function Xe({queries:e,...r},o){const s=ge(),n=St(),a=_t(),i=p.useMemo(()=>e.map(g=>{const j=s.defaultQueryOptions(g);return j._optimisticResults=n?"isRestoring":"optimistic",j}),[e,s,n]);i.forEach(g=>{Rt(g),Dt(g,a)}),Mt(a);const[l]=p.useState(()=>new Qt(s,i,r)),[c,x,v]=l.getOptimisticResult(i,r.combine),f=!n&&r.subscribed!==!1;p.useSyncExternalStore(p.useCallback(g=>f?l.subscribe(we.batchCalls(g)):$t,[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),p.useEffect(()=>{l.setQueries(i,r)},[i,r,l]);const k=c.some((g,j)=>Le(i[j],g))?c.flatMap((g,j)=>{const C=i[j];if(C){const _=new He(s,C);if(Le(C,g))return Ee(C,_,a);At(g,n)&&Ee(C,_,a)}return[]}):[];if(k.length>0)throw Promise.all(k);const N=c.find((g,j)=>{const C=i[j];return C&&Lt({result:g,errorResetBoundary:a,throwOnError:C.throwOnError,query:s.getQueryCache().get(C.queryHash),suspense:C.suspense})});if(N?.error)throw N.error;return x(v())}/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let Pe=typeof document<"u"?p.useLayoutEffect:p.useEffect,Ie=e=>e&&!Array.isArray(e)&&typeof e=="object",le=[],Gt={},Ze=L;const Se=(e,r=le)=>{let o=Gt;Ie(e)?(o=e,e=null,r="dependencies"in o?o.dependencies:le):Ie(r)&&(o=r,r="dependencies"in o?o.dependencies:le),e&&typeof e!="function"&&console.warn("First parameter must be a function or config object");const{scope:s,revertOnUpdate:n}=o,a=p.useRef(!1),i=p.useRef(Ze.context(()=>{},s)),l=p.useRef(x=>i.current.add(null,x)),c=r&&r.length&&!n;return c&&Pe(()=>(a.current=!0,()=>i.current.revert()),le),Pe(()=>{if(e&&i.current.add(e,s),!c||!a.current)return()=>i.current.revert()},r),{context:i.current,contextSafe:l.current}};Se.register=e=>{Ze=e};Se.headless=!0;function Wt(e=1){switch(e){case 1:return"";case 2:return"border-2 border-cyan-400";case 3:return"border-2 border-cyan-500";case 4:return"border-2 border-blue-400";case 5:return"border-2 border-blue-500";case 6:return"border-2 border-indigo-400";case 7:return"border-2 border-indigo-500";case 8:return"border-2 border-purple-400";case 9:return"border-2 border-purple-500";case 10:return"border-2 border-purple-600";default:return""}}function Ht(e=1){if(e<=1)return"";switch(e){case 2:return"shadow-lg shadow-cyan-400/50";case 3:return"shadow-lg shadow-cyan-500/50";case 4:return"shadow-lg shadow-blue-400/50";case 5:return"shadow-lg shadow-blue-500/50";case 6:return"shadow-lg shadow-indigo-400/50";case 7:return"shadow-lg shadow-indigo-500/50";case 8:return"shadow-lg shadow-purple-400/50";case 9:return"shadow-lg shadow-purple-500/50";case 10:return"shadow-xl shadow-purple-600/75";default:return""}}function et(e){if(e.type==="task")return e.importance??1;if(!e.children||e.children.length===0)return 1;const r=e.children.map(o=>et(o));return Math.max(...r)}function _e(e){return et(e)}function Vt(e){return!e||e<=1?"rgba(0, 0, 0, 0)":e<=3?"rgba(6, 182, 212, 0.6)":e<=5?"rgba(59, 130, 246, 0.6)":e<=7?"rgba(99, 102, 241, 0.6)":e<=9?"rgba(147, 51, 234, 0.6)":"rgba(126, 34, 206, 0.8)"}function tt(e,r,o){const s=o?`${o}/${e.name}`:`/${e.name}`;if(Ke(e)<=1)return[];if(e.type==="task")return[s];if(!r[s])return[s];const i=[];if(e.children)for(const l of e.children){const c=tt(l,r,s);i.push(...c)}return i}function rt(e,r,o){const s=o?`${o}/${e.name}`:`/${e.name}`;if(_e(e)!==10)return null;if(e.type==="task"||!r[s])return s;if(e.children)for(const i of e.children){const l=rt(i,r,s);if(l)return l}return null}function Kt({containerRef:e,tree:r,openMap:o,tabName:s,isMobile:n,activePath:a}){Se(()=>{const i=e?.current;if(!i){console.log("ðŸ” GSAP: No container found, skipping animations");return}L.killTweensOf("*"),L.set("*",{clearProps:"all"});const l=setTimeout(()=>{try{n?x():(c(),v())}catch(f){console.error("ðŸš¨ GSAP: Animation error:",f)}},100),c=()=>{const f=new Set;if(r.children)for(const k of r.children)tt(k,o,`/${s}`).forEach(g=>f.add(g));i.querySelectorAll("[data-urgency-ball]").forEach(k=>{const N=k.getAttribute("data-urgency-ball");if(!N)return;if(!f.has(N)){L.set(k,{opacity:0});return}L.set(k,{opacity:1});const g=i.querySelector(`[data-node-path="${N}"]`);if(!g)return;const j=parseInt(g.getAttribute("data-urgency")||"1");if(je(j))try{const C=Oe(g),_=be(j);L.set(k,{position:"absolute",left:0,top:0,xPercent:-50,yPercent:-50}),L.to(k,{motionPath:{path:C,autoRotate:_.autoRotate,alignOrigin:[.5,.5]},duration:_.duration,ease:_.ease,repeat:_.repeat})}catch(C){console.error(`ðŸš¨ GSAP: Failed animating ball for ${N}`,C)}})},x=()=>{i.querySelectorAll("[data-urgency-ball]").forEach(h=>{const k=h.getAttribute("data-urgency-ball");if(!k)return;const N=i.querySelector(`[data-node-path="${k}"]`);if(!N){L.set(h,{opacity:0});return}const g=parseInt(N.getAttribute("data-urgency")||"1");if(!je(g)){L.set(h,{opacity:0});return}try{L.set(h,{opacity:1});const j=Oe(N),C=be(g);L.set(h,{position:"absolute",left:0,top:0,xPercent:-50,yPercent:-50}),L.to(h,{motionPath:{path:j,autoRotate:C.autoRotate,alignOrigin:[.5,.5]},duration:C.duration,ease:C.ease,repeat:C.repeat})}catch(j){console.error(`ðŸš¨ GSAP: Failed animating mobile ball for ${k}`,j),L.set(h,{position:"absolute",left:"50%",top:"0px",xPercent:-50,yPercent:-50}),L.to(h,{rotation:360,duration:be(g).duration,repeat:-1,ease:"none",transformOrigin:"50% 100px"})}})},v=()=>{if(r.children)for(const f of r.children){const h=rt(f,o,`/${s}`);if(!h)continue;const k=i.querySelector(`[data-node-path="${h}"]`);if(!k)continue;const N=_e(f),g=Vt(N);L.set(k,{boxShadow:`0 0 20px ${g}`}),L.to(k,{scale:1.03,duration:1.2,ease:"power2.inOut",yoyo:!0,repeat:-1})}};return()=>{clearTimeout(l),L.killTweensOf("*"),L.set("*",{clearProps:"all"})}},{scope:e,dependencies:[r,o,s,n,a],revertOnUpdate:!0})}function st(e,r,o="",s){const n=o?`${o}/${e.name}`:`/${s}`;if(e.children){for(const a of e.children)if(`${n}/${a.name}`===r)return e.children.map(l=>`${n}/${l.name}`);for(const a of e.children){const i=st(a,r,n,s);if(i.length>0)return i}}return[]}function Jt(e,r,o){return p.useCallback(s=>{o(n=>{const a={...n};return n[s]?Object.keys(n).filter(c=>c.startsWith(s+"/")||c===s).forEach(c=>{a[c]=!1}):(st(e,s,"",r).forEach(c=>{c!==s&&(a[c]=!1,Object.keys(n).forEach(x=>{x.startsWith(c+"/")&&(a[x]=!1)}))}),a[s]=!0),a})},[e,r,o])}function ot(e=640){const[r,o]=p.useState(!1);return p.useEffect(()=>{const s=()=>o(window.innerWidth<e);return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[e]),r}function Yt(e){const r=new Map,o={};return e.forEach(s=>{r.set(s.id,{id:s.id,name:s.name,type:s.type,details:s.details??void 0,importance:s.importance??(s.type==="task"?1:void 0),deadline:s.deadline??void 0,completion_time:s.completion_time??void 0,unique_days_required:s.unique_days_required??void 0,is_completed:s.is_completed??void 0,completed_at:s.completed_at??void 0,completion_comment:s.completion_comment??void 0,children:[],tab_name:s.tab_name,root_category:s.root_category,parent_id:s.parent_id,recurrence_type:s.recurrence_type??void 0,recurrence_interval:s.recurrence_interval??void 0,recurrence_day_of_week:s.recurrence_day_of_week??void 0,recurrence_day_of_month:s.recurrence_day_of_month??void 0,recurrence_end_date:s.recurrence_end_date??void 0,is_recurring_template:s.is_recurring_template??void 0,recurring_template_id:s.recurring_template_id??void 0})}),e.forEach(s=>{const n=r.get(s.id);if(s.parent_id){const a=r.get(s.parent_id);a&&a.children.push(n)}else o[s.root_category??"default"]=n}),o}async function Re(e){const{data:r,error:o}=await Q.from("org_nodes").select("*").eq("root_category",e).not("is_completed","is",!0),s=r;if(o)throw o;return Yt(s??[])[e]??{id:0,name:e,type:"category",root_category:e,children:[]}}const Xt=()=>{const e=ge();return Je({mutationFn:async r=>{if(r.id){const{data:o,error:s}=await Q.from("org_nodes").update({...r,type:"category"}).eq("id",r.id).select().single();if(s)throw s;return o}else{const{data:o,error:s}=await Q.from("org_nodes").insert({...r,type:"category"}).select().single();if(s)throw s;return o}},onSuccess:r=>{e.setQueryData(W.category(r.id),r),e.invalidateQueries({queryKey:W.allOrgTrees()})},onError:r=>{console.error("âŒ Save category error:",r)}})},nt=()=>{const e=ge();return Je({mutationFn:async r=>{const{error:o}=await Q.from("org_nodes").delete().eq("id",r);if(o)throw o;return r},onSuccess:r=>{e.removeQueries({queryKey:W.category(r)}),e.invalidateQueries({queryKey:W.allOrgTrees()})},onError:r=>{console.error("âŒ Delete category error:",r)}})};function Fe({category:e,onCancel:r,parentId:o,parentName:s,rootCategory:n,tabName:a}){const[i,l]=p.useState(e?.name??""),c=Xt(),x=nt(),v=!e,f=!!e;p.useEffect(()=>{e&&l(e.name)},[e]);const h=()=>f&&e?.root_category?e.root_category:v&&s&&n?`${n} > ${s}`:"Unknown",k=g=>{g.preventDefault();const j=e?.parent_id??o,C=e?.root_category??n,_=e?.tab_name??a;if(v&&(!j||!C||!_)){console.error("âŒ Missing required parent context for new category:",{parentId:j,rootCategory:C,tabName:_}),alert("Missing parent information. Please try again.");return}const O={id:e?.id,name:i.trim(),parent_id:j,root_category:C,tab_name:_,type:"category"};console.log("ðŸš€ Submitting category data:",O),c.mutate(O,{onSuccess:S=>{console.log("âœ… Category saved successfully:",S),r()},onError:S=>{console.error("âŒ Failed to save category:",S),alert(`Failed to save category: ${S.message}`)}})},N=()=>{if(e?.id){if(!confirm(`Are you sure you want to delete "${e.name}"?`))return;console.log("ðŸ—‘ï¸ Deleting category:",e.id),x.mutate(e.id,{onSuccess:()=>{console.log("âœ… Category deleted successfully"),r()},onError:g=>{console.error("âŒ Failed to delete category:",g),alert(`Failed to delete category: ${g.message}`)}})}};return t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-[70] flex items-center justify-center bg-black",children:t.jsxs("form",{onSubmit:k,className:"mx-4 max-h-[90vh] w-full max-w-md space-y-4 overflow-y-auto rounded-lg bg-white p-6 text-black shadow-md",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold",children:v?"Create New Category":"Edit Category"}),t.jsx("p",{className:"text-sm text-gray-600",children:v?`Adding to: ${h()}`:`Location: ${h()}`})]}),t.jsx("button",{type:"button",onClick:r,className:"text-2xl font-bold text-gray-500 hover:text-gray-800",children:"Ã—"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700",children:"Category Name *"}),t.jsx("input",{className:"w-full rounded border border-gray-300 p-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:i,onChange:g=>l(g.target.value),placeholder:"Enter category name",required:!0})]}),t.jsxs("div",{className:"flex justify-between border-t pt-4",children:[f&&t.jsx("button",{type:"button",onClick:N,disabled:x.isPending,className:"rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700 disabled:opacity-50",children:x.isPending?"Deleting...":"Delete Category"}),t.jsxs("div",{className:`${f?"ml-auto":""} space-x-2`,children:[t.jsx("button",{type:"button",onClick:r,className:"rounded bg-gray-300 px-4 py-2 text-white hover:bg-gray-400",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:c.isPending||!i.trim(),className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700 disabled:opacity-50",children:c.isPending?v?"Creating...":"Saving...":v?"Create Category":"Save Changes"})]})]})]})})}function me({node:e,level:r=0,onTaskClick:o,openMap:s,toggleOpen:n,path:a,disableExpand:i,isRoot:l=!1}){const c=e.type==="task",x=s[a]||!1,[v,f]=p.useState(!1),[h,k]=p.useState(!1),[N,g]=p.useState(!1),j=Ke(e),C=_e(e),_=()=>f(!1),O=()=>k(!1);return nt(),l?t.jsxs("div",{className:"grid auto-cols-min grid-flow-col gap-8",children:[t.jsx("h2",{className:"mb-8 text-center text-3xl font-bold text-gray-900 dark:text-gray-100",children:e.name}),e.children&&e.children.length>0?t.jsx("div",{className:"node-with-children",children:e.children.map(S=>t.jsx(me,{node:S,level:r+1,onTaskClick:o,openMap:s,toggleOpen:n,path:`${a}/${S.name}`,disableExpand:i,isRoot:!1},S.name))}):t.jsx("div",{className:"py-12 text-center",children:t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No items in this category yet."})}),v&&t.jsx(K,{parentId:e.id,parentName:e.name,rootCategory:e.root_category,tabName:e.root_category,onCancel:_}),h&&t.jsx(Fe,{parentId:e.id,parentName:e.name,rootCategory:e.root_category,tabName:e.root_category,onCancel:_})]}):t.jsxs("div",{className:"flex w-full flex-col items-center",children:[t.jsxs("div",{"data-node-path":a,"data-urgency":j,className:`relative min-w-[120px] rounded-lg bg-white text-center shadow-amber-600 outline outline-gray-400 ${e.is_completed?"bg-green-50 opacity-60":""} ${Wt(C)} ${Ht(C)}`,children:[!e.is_completed&&je(j)&&t.jsx("div",{className:`pointer-events-none absolute z-10 rounded-full ${Ft(j)} ${zt(j)} ${qt(j)}`,"data-urgency-ball":a,style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"}}),c?t.jsxs("button",{className:`h-full w-full rounded-lg p-2 text-lg font-semibold underline hover:text-blue-200 focus:outline-none ${e.is_completed?"bg-green-600 text-white line-through":"bg-blue-600 text-white"}`,onClick:()=>o(e),children:[e.name,e.is_completed&&t.jsx("span",{className:"ml-2 text-xs",children:"âœ“"})]}):t.jsx("button",{className:"w-full rounded-lg bg-gray-800 p-2 text-center text-lg font-semibold text-white focus:outline-none",onClick:()=>!i&&n(a),type:"button",disabled:i,children:t.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.name,!i&&t.jsx("span",{className:"ml-1 text-gray-400",children:x?"â–¼":"â–¶"})]})})]}),!c&&x&&!i&&t.jsxs("div",{className:"mt-4 grid w-full auto-cols-min grid-flow-col gap-4",children:[e.children?.map(S=>t.jsx(me,{node:S,level:r+1,onTaskClick:o,openMap:s,toggleOpen:n,path:`${a}/${S.name}`,disableExpand:i,isRoot:!1},S.name)),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-xl font-bold text-white hover:bg-blue-700",onClick:()=>f(!0),title:"Add Task",type:"button",children:"+"}),t.jsx("button",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-600 text-xl font-bold text-white hover:bg-green-700",onClick:()=>k(!0),title:"Add Category",type:"button",children:"ðŸ“"}),(!e.children||e.children.length===0)&&t.jsx("button",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-red-600 text-xl font-bold text-white hover:bg-red-700",onClick:()=>{g(!0)},title:"Delete Category",type:"button",children:"ðŸ—‘ï¸"})]})]}),v&&t.jsx(K,{parentId:e.id,parentName:e.name,rootCategory:e.root_category,tabName:e.root_category,onCancel:_}),N&&t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-[70] flex items-center justify-center bg-black",children:t.jsxs("div",{className:"mx-4 max-w-sm rounded-lg bg-white p-6 text-black",children:[t.jsx("h3",{className:"mb-4 text-lg font-bold",children:"Delete Category"}),t.jsxs("p",{className:"mb-4",children:['Are you sure you want to delete "',e.name,'"?']}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>g(!1),className:"rounded bg-gray-300 px-4 py-2 hover:bg-gray-400",children:"Cancel"}),t.jsx("button",{onClick:()=>{g(!1)},className:"rounded bg-red-600 px-4 py-2 text-white hover:bg-red-700",children:"Delete"})]})]})}),h&&t.jsx(Fe,{parentId:e.id,parentName:e.name,rootCategory:e.root_category,tabName:e.root_category,onCancel:O})]})}function Zt({currentNode:e,activePath:r,setActivePath:o,onTaskClick:s,tabName:n}){const[a,i]=p.useState(!1),l=f=>{const h=`${r}/${f.name}`;console.log(`Mobile: navigating forward to ${h}`),o(h)},c=()=>{const f=r.split("/").slice(0,-1).join("/")||`/${n}`;console.log(`Mobile: navigating back to ${f}`),o(f)},x=()=>i(!1),v=()=>{if(!r||typeof r!="string")return console.warn("MobileOrgChart: activePath is undefined or not a string:",r),n;try{return r.replace(`/${n}`,n).replace(/\//g," â†’ ")}catch(f){return console.error("Error generating breadcrumb:",f),n}};return r?t.jsxs("div",{className:"mx-auto flex w-full max-w-md flex-col p-4",children:[t.jsx("h2",{className:"mb-4 text-center text-2xl font-bold text-gray-900 dark:text-gray-100",children:n}),t.jsx("div",{className:"mb-2 text-sm text-gray-600 dark:text-gray-400",children:v()}),r!==`/${n}`&&t.jsx("button",{onClick:c,className:"mb-4 text-left font-semibold text-blue-600 transition-colors hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"â† Back"}),e.type==="category"&&t.jsx("div",{className:"mb-4 flex justify-center",children:t.jsxs("button",{className:"flex items-center justify-center space-x-2 rounded-lg bg-blue-600 px-4 py-3 font-semibold text-white shadow-lg transition-colors hover:bg-blue-700 active:bg-blue-800",onClick:()=>i(!0),title:"Add new task or category",type:"button",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{children:"Add Task"})]})}),t.jsxs("div",{className:"flex flex-col gap-4",children:[e.children?.map(f=>{const h=`${r}/${f.name}`;return t.jsxs("div",{className:"flex items-center justify-between gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx(me,{node:f,level:1,onTaskClick:s,openMap:{},toggleOpen:()=>{},path:h,disableExpand:!0,isRoot:!1})}),!f.is_completed&&f.children?.length?t.jsx("button",{onClick:()=>l(f),className:"flex-shrink-0 rounded border border-blue-600 px-3 py-1 text-sm text-blue-600 transition-colors hover:bg-blue-50 hover:text-blue-800 dark:border-blue-400 dark:text-blue-400 dark:hover:bg-blue-900/20 dark:hover:text-blue-300",children:"Enter â†’"}):null]},h)}),!e.children?.length&&t.jsxs("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:["No items in this category",e.type==="category"&&t.jsx("div",{className:"mt-4",children:t.jsx("button",{className:"rounded-lg bg-blue-600 px-6 py-3 font-semibold text-white transition-colors hover:bg-blue-700",onClick:()=>i(!0),children:"Add First Task"})})]})]}),a&&t.jsx(K,{parentId:e.id,parentName:e.name,rootCategory:e.root_category,tabName:e.root_category,onCancel:x})]}):(console.error("MobileOrgChart: activePath is required but was:",r),t.jsx("div",{className:"mx-auto flex w-full max-w-md flex-col p-4",children:t.jsx("div",{className:"py-8 text-center text-red-600",children:"Navigation error: Invalid path"})}))}const er=(e,r)=>{const o=r.split("/").filter(Boolean);if(!o.length)return e;let s=e;for(let n=1;n<o.length;n++)if(!s?.children||(s=s.children.find(a=>a.name===o[n]),!s))return null;return s||null};function tr({tabName:e}){const r=p.useRef(null),o=ot(),[s,n]=p.useState({}),[a,i]=p.useState(null),[l,c]=p.useState(`/${e}`);p.useEffect(()=>{c(`/${e}`)},[e]);const{data:x,isLoading:v,error:f}=he({queryKey:W.orgTree(e),queryFn:()=>Re(e),placeholderData:Ve}),h=Jt(x||{},e,n);Kt({containerRef:r,tree:x||{},openMap:s,tabName:e,isMobile:o,activePath:o?l:void 0});const k=j=>i(j),N=()=>i(null);if(v)return t.jsxs("div",{className:"py-8 text-center text-gray-900 dark:text-gray-100",children:["Loading ",e," tree..."]});if(f)return t.jsxs("div",{className:"py-8 text-center text-red-600 dark:text-red-400",children:["Error loading ",e," tree"]});if(!x)return t.jsx("div",{className:"py-8 text-center text-gray-900 dark:text-gray-100",children:"No data found"});const g=o?er(x,l):null;return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:r,className:"relative flex h-full w-full items-start p-4",children:o?g&&l?t.jsx(Zt,{root:x,currentNode:g,activePath:l,setActivePath:c,onTaskClick:k,tabName:e}):t.jsxs("div",{className:"py-8 text-center text-red-600",children:["Navigation error: Node not found",t.jsxs("div",{className:"mt-2 text-sm",children:["Tab: ",e,", Path: ",l||"undefined"]})]}):t.jsx(me,{node:x,level:0,onTaskClick:k,openMap:s,toggleOpen:h,path:`/${e}`,isRoot:!0})}),a&&t.jsx(K,{task:a,onCancel:N})]})}function rr({isOpen:e,onClose:r,initialTaskId:o}){const[s,n]=p.useState("add"),[a,i]=p.useState([]),[l,c]=p.useState([]),[x,v]=p.useState(!0),[f,h]=p.useState(null),[k,N]=p.useState(""),[g,j]=p.useState(!1),[C,_]=p.useState(""),[O,S]=p.useState(null),F=k?a.find(y=>y.id===k):null,q=(y,D)=>{const R=[y.name];let E=y;for(;E.parent_id;){const P=D.find(d=>d.id===E.parent_id);if(P)R.unshift(P.name),E=P;else break}return R.join(" > ")},B=async()=>{try{v(!0),h(null);const{data:y,error:D}=await Q.from("org_nodes").select("*").order("root_category, name");if(D)throw D;const R=y,E=R.filter(d=>d.type==="category").map(d=>({id:d.id,name:d.name,type:d.type,root_category:d.root_category,path:q(d,R)})),P=R.filter(d=>d.type==="task").map(d=>({id:d.id,name:d.name,type:d.type,root_category:d.root_category,path:q(d,R)}));i(E),c(P)}catch(y){console.error("Error fetching data:",y),h(y instanceof Error?y.message:"Failed to load data")}finally{v(!1)}},w=async y=>{try{const{data:D,error:R}=await Q.from("org_nodes").select("*").eq("id",y).single();if(R)throw R;S(D)}catch(D){console.error("Error loading task:",D),h("Failed to load task data")}},b=y=>{n(y),N(""),_(""),j(!1),S(null)},$=y=>{N(y),j(!!y)},U=async y=>{_(y),y==="new"?(j(!1),S(null)):typeof y=="number"?await w(y):(S(null),j(!1))},H=()=>{S(null),_(""),B(),r()};return p.useEffect(()=>{e&&B()},[e]),p.useEffect(()=>{e&&o&&(n("edit"),U(o))},[e,o]),e?t.jsxs("div",{className:"bg-opacity-50 fixed inset-0 z-[60] overflow-y-auto bg-black",children:[t.jsx("div",{className:"flex min-h-screen items-start justify-center px-4 py-6",children:t.jsxs("div",{className:"mx-auto w-full max-w-md rounded-lg bg-white shadow-xl dark:bg-gray-800",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-6 dark:border-gray-600",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Quick Task Manager"}),t.jsx("button",{onClick:r,className:"text-2xl font-bold text-gray-400 hover:text-gray-600 dark:text-gray-300 dark:hover:text-gray-100","aria-label":"Close",children:"Ã—"})]}),t.jsx("div",{className:"border-b border-gray-200 p-6 dark:border-gray-600",children:t.jsxs("div",{className:"flex space-x-1 rounded-lg bg-gray-100 p-1 dark:bg-gray-700",children:[t.jsx("button",{type:"button",onClick:()=>b("add"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${s==="add"?"bg-white text-blue-600 shadow-sm dark:bg-gray-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100"}`,children:"Add Task"}),t.jsx("button",{type:"button",onClick:()=>b("edit"),className:`flex-1 rounded-md px-4 py-2 text-sm font-medium transition-colors ${s==="edit"?"bg-white text-blue-600 shadow-sm dark:bg-gray-600 dark:text-blue-400":"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-100"}`,children:"Edit Task"})]})}),x&&t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-b-2 border-blue-600"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading..."})]}),f&&t.jsx("div",{className:"border-l-4 border-red-400 bg-red-50 p-4 text-sm text-red-700 dark:bg-red-900/20 dark:text-red-300",children:f}),!x&&t.jsxs("div",{className:"space-y-4 p-6",children:[s==="add"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add to Category *"}),t.jsxs("select",{value:k,onChange:y=>$(y.target.value?Number(y.target.value):""),className:"w-full rounded-lg border border-gray-300 bg-white p-3 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",children:[t.jsx("option",{value:"",children:"Select a category..."}),a.map(y=>t.jsx("option",{value:y.id,children:y.path},y.id))]})]}),!k&&t.jsx("p",{className:"text-sm text-gray-500 italic dark:text-gray-400",children:"Select a category above to add a new task"})]}),s==="edit"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Task *"}),t.jsxs("select",{value:C,onChange:y=>{const D=y.target.value;U(D==="new"?"new":D===""?"":Number(D))},className:"w-full rounded-lg border border-gray-300 bg-white p-3 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",children:[t.jsx("option",{value:"",children:"Choose an option..."}),t.jsx("option",{value:"new",children:"Create New Task"}),t.jsx("optgroup",{label:"Existing Tasks",children:l.map(y=>t.jsx("option",{value:y.id,children:y.path},y.id))})]})]}),C==="new"&&t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Add to Category *"}),t.jsxs("select",{value:k,onChange:y=>$(y.target.value?Number(y.target.value):""),className:"w-full rounded-lg border border-gray-300 bg-white p-3 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100",children:[t.jsx("option",{value:"",children:"Select a category..."}),a.map(y=>t.jsx("option",{value:y.id,children:y.path},y.id))]})]}),!C&&t.jsx("p",{className:"text-sm text-gray-500 italic dark:text-gray-400",children:"Select a task above to edit, or create a new one"})]})]})]})}),g&&F&&t.jsx(K,{parentId:k,parentName:F.name,rootCategory:F.root_category,tabName:F.root_category,onCancel:()=>{j(!1),N("")}}),O&&t.jsx(K,{task:O,onCancel:H})]}):null}function at({icon:e,title:r,description:o,action:s}){const n=t.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});return t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mx-auto h-24 w-24 text-gray-400 mb-4",children:e||n}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r}),o&&t.jsx("p",{className:"text-gray-600 mb-4",children:o}),s]})}function it({tasks:e}){const r=e.filter(n=>n.urgencyLevel>=7).length,o=e.filter(n=>(n.importance||1)>=7).length,s=e.reduce((n,a)=>n+(a.completion_time||0),0);return t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-red-50 p-4 rounded border-l-4 border-red-500",children:[t.jsx("div",{className:"text-sm text-red-700",children:"High Urgency"}),t.jsx("div",{className:"text-2xl font-bold text-red-800",children:r})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded border-l-4 border-purple-500",children:[t.jsx("div",{className:"text-sm text-purple-700",children:"High Importance"}),t.jsx("div",{className:"text-2xl font-bold text-purple-800",children:o})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded border-l-4 border-gray-500",children:[t.jsx("div",{className:"text-sm text-gray-700",children:"Total Time"}),t.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[s.toFixed(1),"h"]})]})]})})}function sr({task:e,onClick:r}){const o=i=>i<=3?{dot:"bg-green-400",text:"text-green-600"}:i<=6?{dot:"bg-yellow-400",text:"text-yellow-600"}:i<=8?{dot:"bg-orange-400",text:"text-orange-600"}:{dot:"bg-red-500",text:"text-red-600"},s=i=>i<=3?{dot:"bg-gray-300",text:"text-gray-600"}:i<=6?{dot:"bg-blue-400",text:"text-blue-600"}:i<=8?{dot:"bg-purple-400",text:"text-purple-600"}:{dot:"bg-purple-600",text:"text-purple-800"},n=o(e.urgencyLevel),a=s(e.importance||1);return t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:bg-gray-50 cursor-pointer transition-colors shadow-sm",onClick:()=>r(e),children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:e.name}),e.details&&t.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:e.details}),t.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[t.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e.root_category}),e.completion_time&&t.jsxs("span",{className:"text-xs text-gray-500",children:[e.completion_time,"h estimated"]})]})]}),t.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${n.dot}`}),t.jsxs("span",{className:`text-xs font-medium ${n.text}`,children:["U",e.urgencyLevel]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${a.dot}`}),t.jsxs("span",{className:`text-xs font-medium ${a.text}`,children:["I",e.importance||1]})]})]})]})})}function or(e){const r=new Date().toISOString().split("T")[0],o=new Date(r),s=[],n=a=>{a.type==="task"&&a.deadline&&!a.is_completed&&new Date(a.deadline)<=o&&s.push(a),a.children&&a.children.forEach(n)};return e.forEach(n),console.log(`Collected ${s.length} tasks due today/overdue from ${e.length} org trees`),s}function nr(e){return e.map(r=>({...r,urgencyLevel:Te(r.deadline,r.completion_time,r.unique_days_required),daysUntilDeadline:r.deadline?ze(r.deadline):0,isOverdue:r.deadline?ze(r.deadline)<0:!1}))}function ze(e){const r=new Date,s=new Date(e).getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))}const ar={byUrgencyThenImportance:(e,r)=>r.urgencyLevel!==e.urgencyLevel?r.urgencyLevel-e.urgencyLevel:(r.importance||1)-(e.importance||1)},ir=["Household","Finances","Cleo","Job","Social","Personal","Orphans"];function lr({isOpen:e,onClose:r}){const[o,s]=p.useState(null),n=ge(),a=Xe({queries:ir.map(h=>({queryKey:W.orgTree(h),queryFn:()=>Re(h),enabled:e,staleTime:300*1e3}))});if(!e)return null;const i=a.some(h=>h.isLoading),l=a.some(h=>h.error);if(i)return t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:t.jsx("div",{className:"rounded-lg bg-white p-8",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-600"}),t.jsx("span",{children:"Loading tasks from all categories..."})]})})});if(l)return t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black",children:t.jsx("div",{className:"rounded-lg bg-white p-8",children:t.jsx("div",{className:"text-red-600",children:"Error loading tasks. Please try again."})})});const c=a.filter(h=>h.data&&h.isSuccess).map(h=>h.data);console.log(`Found ${c.length} org tree roots from all tabs`);const x=nr(or(c)).sort(ar.byUrgencyThenImportance);console.log(`Found ${x.length} tasks due today/overdue across all tabs`);const v=()=>{s(null),n.invalidateQueries({queryKey:W.allOrgTrees()})},f=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-start justify-center bg-black pt-10",children:t.jsxs("div",{className:"mx-4 max-h-[calc(90vh-2.5rem)] w-full max-w-4xl overflow-y-auto rounded-lg bg-white p-6 shadow-lg",children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tasks Due Today & Overdue"}),t.jsxs("p",{className:"text-sm text-gray-600",children:[f," â€¢ ",x.length," task",x.length!==1?"s":""," due or overdue across all categories"]})]}),t.jsx("button",{onClick:r,className:"text-2xl font-bold text-gray-500 transition-colors hover:text-gray-800","aria-label":"Close",children:"Ã—"})]}),x.length===0&&t.jsx(at,{title:"No tasks due today!",description:"Great job staying on top of your schedule. Enjoy your day!"}),x.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(it,{tasks:x}),t.jsxs("div",{children:[t.jsxs("h3",{className:"mb-4 text-lg font-semibold text-gray-800",children:["Today's Tasks & Overdue Items",t.jsx("span",{className:"ml-2 text-sm font-normal text-gray-600",children:"(Click any task to edit)"})]}),t.jsx("div",{className:"space-y-3",children:x.map(h=>t.jsx(sr,{task:h,onClick:s},h.id))})]})]}),o&&t.jsx(K,{task:o,onCancel:v})]})})}const xe=["Household","Finances","Cleo","Job","Social","Personal","Orphans"];function cr(){return Xe({queries:xe.map(r=>({queryKey:W.criticalTaskCount(r),queryFn:async()=>{const{data:o,error:s}=await Q.from("org_nodes").select("deadline, completion_time, unique_days_required").eq("type","task").eq("root_category",r).not("deadline","is",null).not("completion_time","is",null).not("unique_days_required","is",null).not("is_completed","is",!0);if(s)throw s;return(o||[]).reduce((a,i)=>Te(i.deadline,i.completion_time,i.unique_days_required)===10?a+1:a,0)},staleTime:12e4,gcTime:3e5})),combine:r=>{const o={},s=r.some(a=>a.isLoading),n=r.some(a=>a.error);return r.forEach((a,i)=>{o[xe[i]]=a.data||0}),{counts:o,isLoading:s,hasError:n}}}).counts}function lt({activeTab:e,variant:r="desktop",onTabClick:o}){const s=cr();return r==="mobile"?t.jsx("div",{className:"flex flex-col gap-2",children:xe.map(n=>{const a=s[n]||0,i=e===n;return t.jsxs(ue,{to:`/org-chart/${n}`,onClick:o,className:`flex items-center justify-between rounded-lg px-4 py-3 text-base font-medium transition-all ${i?"bg-blue-600 text-white dark:bg-blue-700":"text-gray-300 hover:bg-gray-800/60 hover:text-white dark:hover:bg-gray-700/60"}`,children:[t.jsx("span",{children:n}),a>0&&t.jsx("span",{className:"flex h-6 min-w-[24px] items-center justify-center rounded-full bg-red-500 px-2 text-xs font-bold text-white",children:a>99?"99+":a})]},n)})}):t.jsx("div",{className:"flex items-center gap-1",children:xe.map(n=>{const a=s[n]||0,i=e===n;return t.jsxs(ue,{to:`/org-chart/${n}`,onClick:o,className:`relative flex items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-semibold transition-all ${i?"bg-blue-600/20 text-blue-400 shadow-inner dark:bg-blue-700/30 dark:text-blue-300":"text-gray-300 hover:bg-gray-800/60 hover:text-white dark:hover:bg-gray-700/60"}`,children:[t.jsx("span",{children:n}),a>0&&t.jsx("span",{className:"flex h-5 min-w-[20px] items-center justify-center rounded-full bg-red-500 px-1.5 text-[10px] font-bold text-white shadow-sm",children:a>99?"99+":a}),i&&t.jsx("span",{className:"absolute bottom-0 left-1/2 h-0.5 w-3/4 -translate-x-1/2 rounded-full bg-blue-400 dark:bg-blue-300"})]},n)})})}async function dr(){const{data:e,error:r}=await Q.from("org_nodes").select("*").eq("type","task").not("is_completed","is",!0).order("last_touched_at",{ascending:!1}).limit(10);return e}function ct(){return he({queryKey:W.recentTasks(),queryFn:dr,staleTime:1e3*60})}function ur({isOpen:e,onClose:r,activeTab:o,onRecentTaskClick:s}){const{data:n,isLoading:a}=ct(),i=l=>{s?.(l),r()};return e?t.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[t.jsx("div",{className:"bg-opacity-50 fixed inset-0 bg-black",onClick:r}),t.jsxs("div",{className:"fixed top-0 left-0 h-full w-80 transform bg-gray-900 shadow-xl transition-transform dark:bg-gray-800",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-700 p-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-white",children:"Navigation"}),t.jsx("button",{onClick:r,className:"text-2xl text-gray-400 hover:text-white","aria-label":"Close menu",children:"Ã—"})]}),t.jsxs("div",{className:"p-4",children:[t.jsx(ue,{to:"/",className:"mb-2 block rounded px-4 py-3 text-gray-300 transition-colors hover:bg-gray-800 hover:text-white",onClick:r,children:"â† Home"}),t.jsxs("div",{className:"mt-4 border-t border-gray-700 pt-4",children:[t.jsx("h3",{className:"mb-3 text-sm font-medium tracking-wide text-gray-400 uppercase",children:"Categories"}),t.jsx(lt,{activeTab:o,variant:"mobile",onTabClick:r})]}),s&&t.jsxs("div",{className:"mt-4 border-t border-gray-700 pt-4",children:[t.jsx("h3",{className:"mb-3 text-sm font-medium tracking-wide text-gray-400 uppercase",children:"Recent Tasks"}),a&&t.jsx("div",{className:"flex items-center justify-center py-4",children:t.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-b-2 border-blue-600"})}),!a&&(!n||n.length===0)&&t.jsx("p",{className:"px-4 py-2 text-sm text-gray-500",children:"No recent tasks yet"}),!a&&n&&n.length>0&&t.jsx("div",{className:"space-y-1",children:n.map(l=>t.jsxs("button",{onClick:()=>i(l),className:"w-full rounded px-4 py-2 text-left text-sm text-gray-300 transition-colors hover:bg-gray-800 hover:text-white",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"truncate",children:l.name}),l.importance&&l.importance>=8&&t.jsx("span",{className:"ml-2 text-purple-400",children:"â˜…"})]}),t.jsx("div",{className:"mt-0.5 text-xs text-gray-500",children:l.root_category})]},l.id))})]})]})]})]}):null}function mr(e,r){const o=new Date,s=e==="28-days"?new Date(o.getTime()+672*60*60*1e3):r?new Date(r):new Date(o.getTime()+672*60*60*1e3);return{startDate:o,endDate:s}}function xr(e,r){if(r==="All levels")return!0;const o=e||1;return{1:n=>n===1,"2-4":n=>n>=2&&n<=4,"5-6":n=>n>=5&&n<=6,"7-9":n=>n>=7&&n<=9,10:n=>n===10,"All levels":()=>!0}[r](o)}function hr(e,r){const o=r.getTime()-e.getTime();return Math.ceil(o/(1e3*60*60*24))/7*25}function qe(e){const r=new Date,s=new Date(e).getTime()-r.getTime();return Math.ceil(s/(1e3*60*60*24))}function Ue(e){return e<=.5?"text-green-600":e<=.8?"text-yellow-600":e<=1?"text-orange-600":"text-red-600"}function gr(e){return e<=.5?"Light load":e<=.8?"Moderate load":e<=1?"Heavy load":"Overloaded"}function fr(e){return e.toISOString().split("T")[0]}function dt(e){return e.map(r=>({...r,daysUntilDeadline:r.deadline?qe(r.deadline):0,isOverdue:r.deadline?qe(r.deadline)<0:!1})).sort((r,o)=>r.daysUntilDeadline-o.daysUntilDeadline)}function pr(e,r,o){let s=0;const n=[],a=[];return e.forEach(i=>{if(!i.deadline||!i.completion_time)return;const l=new Date(i.deadline),c=new Date,x=Math.ceil((l.getTime()-c.getTime())/(1e3*60*60*24));if(l<=o)s+=i.completion_time,n.push(i);else{const f=i.completion_time/x*r;s+=f,a.push({task:i,partialTime:f,totalTime:i.completion_time})}}),{totalRequiredTime:s,tasksInWindow:n,tasksWithPartialTime:a}}function br(e,r){const o=[...e,...r.map(n=>n.task)];return dt(o).map(n=>{const a=r.find(i=>i.task.id===n.id);return{...n,isPartialTime:!!a,partialRequiredTime:a?.partialTime,effectiveRequiredTime:a?a.partialTime:n.completion_time||0}})}async function yr(){const{data:e,error:r}=await Q.from("org_nodes").select("*").eq("type","task").not("deadline","is",null).not("is_completed","is",!0);if(r)throw r;return dt(e).map(n=>({...n,urgencyLevel:Te(n.deadline,n.completion_time,n.unique_days_required)})).sort((n,a)=>n.isOverdue&&!a.isOverdue?-1:!n.isOverdue&&a.isOverdue?1:n.isOverdue&&a.isOverdue?a.daysUntilDeadline-n.daysUntilDeadline:n.daysUntilDeadline-a.daysUntilDeadline)}function vr(e=!0){const{data:r=[],isLoading:o,error:s,refetch:n}=he({queryKey:["allTasks"],queryFn:yr,enabled:e,staleTime:3e5,gcTime:18e5});return{tasks:r,isLoading:o,error:s?.message||null,refetch:n,reload:n}}function wr({tasks:e,onTaskSelect:r}){return t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full border border-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Task","Category","Deadline","Days Left","Time Required","Unique Days","Urgency","Importance"].map(o=>t.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-700",children:o},o))})}),t.jsx("tbody",{children:e.map((o,s)=>t.jsxs("tr",{className:`${s%2===0?"bg-gray-50":"bg-white"} ${o.isOverdue?"bg-red-50":""} hover:bg-blue-50 cursor-pointer transition-colors`,onClick:()=>r(o),title:"Click to view/edit task details",children:[t.jsxs("td",{className:"px-3 py-2 text-sm",children:[t.jsx("div",{className:"font-medium text-gray-800 hover:text-blue-600",children:o.name}),o.details&&t.jsx("div",{className:"text-xs text-gray-500 mt-1 max-w-xs truncate",title:o.details,children:o.details})]}),t.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:t.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:o.root_category})}),t.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:o.deadline?new Date(o.deadline).toLocaleDateString():"No deadline"}),t.jsx("td",{className:`px-3 py-2 text-sm font-medium ${o.isOverdue?"text-red-600":o.daysUntilDeadline<=7?"text-orange-600":o.daysUntilDeadline<=30?"text-yellow-600":"text-gray-600"}`,children:o.isOverdue?`${Math.abs(o.daysUntilDeadline)} overdue`:`${o.daysUntilDeadline} days`}),t.jsxs("td",{className:"px-3 py-2 text-sm text-gray-600",children:[o.completion_time?.toFixed(1)||0,"h"]}),t.jsx("td",{className:"px-3 py-2 text-sm text-gray-600",children:o.unique_days_required?.toFixed(1)||0}),t.jsx("td",{className:"px-3 py-2 text-sm",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${o.urgencyLevel<=3?"bg-green-400":o.urgencyLevel<=6?"bg-yellow-400":o.urgencyLevel<=8?"bg-orange-400":"bg-red-500"}`}),t.jsxs("span",{className:"text-xs font-medium",children:["Level ",o.urgencyLevel]})]})}),t.jsx("td",{className:"px-3 py-2 text-sm",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${(o.importance||1)<=3?"bg-gray-300":(o.importance||1)<=6?"bg-blue-400":(o.importance||1)<=8?"bg-purple-400":"bg-purple-600"}`}),t.jsxs("span",{className:"text-xs font-medium",children:["Level ",o.importance||1]})]})})]},o.id))})]})})}function jr(){return t.jsx("div",{className:"text-center py-8",children:t.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),t.jsx("span",{children:"Loading tasks..."})]})})}function kr({error:e,onClick:r}){return t.jsxs("div",{className:"text-center py-8 text-red-600",children:[t.jsxs("p",{className:"mt-2",children:["Error: ",e]}),t.jsx("button",{onClick:()=>r(),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Try Again"})]})}function Nr({isOpen:e,onClose:r}){const{tasks:o=[],isLoading:s,error:n,reload:a}=vr(e),[i,l]=p.useState(null),c=()=>{l(null),a()};return e?t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-start justify-center bg-black pt-20",children:t.jsxs("div",{className:"mx-4 max-h-[calc(90vh-5rem)] w-full max-w-6xl overflow-y-auto rounded-lg bg-white p-6 shadow-lg",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Complete Task List"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["All tasks sorted by deadline â€¢ Total: ",o.length," tasks"]})]}),t.jsx("button",{onClick:r,className:"text-2xl font-bold text-gray-500 hover:text-gray-800",children:"Ã—"})]}),s&&t.jsx(jr,{}),n&&t.jsx(kr,{error:n,onClick:()=>a()}),!s&&!n&&o.length===0&&t.jsx(at,{title:"No tasks found with deadlines"}),!s&&!n&&o.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(it,{tasks:o}),t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-lg font-semibold text-gray-800",children:"Task Details"}),t.jsx("p",{className:"mb-3 text-sm text-gray-600",children:"Click on any task to view or edit its details"}),t.jsx(wr,{tasks:o,onTaskSelect:l})]})]}),i&&t.jsx(K,{task:i,onCancel:c})]})}):null}function Cr(){const[e,r]=p.useState({totalRequiredTime:0,totalAvailableTime:0,taskCount:0,ratio:0,tasks:[]}),[o,s]=p.useState(!0),[n,a]=p.useState(null),[i,l]=p.useState(!1),[c,x]=p.useState(!1),[v,f]=p.useState("28-days"),[h,k]=p.useState(""),[N,g]=p.useState("All levels"),j=async()=>{try{s(!0),a(null);const{startDate:b,endDate:$}=mr(v,h),U=Math.ceil(($.getTime()-b.getTime())/(1e3*60*60*24)),{data:H,error:y}=await Q.from("org_nodes").select("*").eq("type","task").gte("deadline",b.toISOString().split("T")[0]).not("deadline","is",null).not("completion_time","is",null).not("is_completed","is",!0);if(y)throw y;const D=H.filter(se=>xr(se.importance,N)),{totalRequiredTime:R,tasksInWindow:E,tasksWithPartialTime:P}=pr(D,U,$),d=hr(b,$),te=d>0?R/d:0,re=br(E,P);r({totalRequiredTime:R,totalAvailableTime:d,taskCount:D.length,ratio:te,tasks:re})}catch(b){console.error("Error fetching time report data:",b),a(b instanceof Error?b.message:"An error occurred")}finally{s(!1)}};if(p.useEffect(()=>{j()},[v,h,N]),o)return t.jsxs("div",{className:"flex items-center space-x-2 text-sm text-white",children:[t.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),t.jsx("span",{children:"Loading..."})]});if(n)return t.jsxs("div",{className:"text-sm text-red-400",children:["Error: ",n]});const C=()=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-gray-300",children:"Time Window:"}),t.jsxs("select",{className:"rounded border-gray-600 bg-gray-700 px-2 py-1 text-xs text-white",value:v,onChange:b=>f(b.target.value),children:[t.jsx("option",{value:"28-days",children:"Next 28 days"}),t.jsx("option",{value:"custom",children:"Custom date"})]}),v==="custom"&&t.jsx("input",{type:"date",className:"mt-1 rounded border border-gray-600 bg-gray-700 px-2 py-1 text-xs text-white",value:h,onChange:b=>k(b.target.value),min:fr(new Date)})]}),_=()=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-xs text-gray-300",children:"Importance:"}),t.jsxs("select",{className:"rounded border border-gray-600 bg-gray-700 px-2 py-1 text-xs text-white",value:N,onChange:b=>g(b.target.value),children:[t.jsx("option",{value:"All levels",children:"All levels"}),t.jsx("option",{value:"1",children:"Level 1"}),t.jsx("option",{value:"2-4",children:"Levels 2-4"}),t.jsx("option",{value:"5-6",children:"Levels 5-6"}),t.jsx("option",{value:"7-9",children:"Levels 7-9"}),t.jsx("option",{value:"10",children:"Level 10"})]})]}),O=()=>t.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col rounded border-l border-gray-600 p-2 pl-4 transition-colors hover:bg-gray-800",children:[t.jsx("div",{className:"text-xs text-gray-300",children:"Time Analysis:"}),t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:`font-bold ${Ue(e.ratio)}`,children:[(e.ratio*100).toFixed(1),"%"]}),t.jsxs("div",{className:"text-xs text-gray-400",children:["(",e.totalRequiredTime.toFixed(1),"h /"," ",e.totalAvailableTime.toFixed(1),"h)"]})]}),t.jsxs("div",{className:"text-xs text-gray-400",children:[e.taskCount," tasks â€¢ ",gr(e.ratio)]})]}),S=()=>t.jsx("button",{onClick:()=>x(!0),className:"text-gray-400 transition-colors hover:text-white",title:"View all tasks",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),F=()=>t.jsx("button",{onClick:j,className:"text-gray-400 transition-colors hover:text-white",title:"Refresh report",children:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),q=()=>{const b=[{label:"Total Required Time",value:`${e.totalRequiredTime.toFixed(1)}h`,color:"text-gray-800"},{label:"Available Time",value:`${e.totalAvailableTime.toFixed(1)}h`,color:"text-gray-800"},{label:"Utilization",value:`${(e.ratio*100).toFixed(1)}%`,color:Ue(e.ratio).replace("text-","text-")},{label:"Task Count",value:`${e.taskCount}`,color:"text-gray-800"}];return t.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:b.map(($,U)=>t.jsxs("div",{className:"rounded bg-gray-100 p-4",children:[t.jsx("div",{className:"text-sm text-gray-600",children:$.label}),t.jsx("div",{className:`text-xl font-bold ${$.color} sm:text-2xl`,children:$.value})]},U))})},B=()=>t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full border border-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Task","Deadline","Days Left","Time Required","Effective Time","Importance","Category"].map(b=>t.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:b},b))})}),t.jsx("tbody",{children:e.tasks.map((b,$)=>t.jsxs("tr",{className:$%2===0?"bg-gray-50":"bg-white",children:[t.jsxs("td",{className:"px-4 py-2 text-sm text-gray-800",children:[b.name,b.isPartialTime&&t.jsx("span",{className:"ml-2 text-xs font-medium text-blue-600",children:"(Partial)"})]}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:b.deadline?new Date(b.deadline).toLocaleDateString():"No deadline"}),t.jsx("td",{className:`px-4 py-2 text-sm ${b.isOverdue?"font-bold text-red-600":b.daysUntilDeadline<=7?"text-orange-600":"text-gray-600"}`,children:b.isOverdue?`${Math.abs(b.daysUntilDeadline)} overdue`:`${b.daysUntilDeadline} days`}),t.jsxs("td",{className:"px-4 py-2 text-sm text-gray-600",children:[b.completion_time?.toFixed(1)||0,"h"]}),t.jsxs("td",{className:"px-4 py-2 text-sm text-gray-600",children:[t.jsxs("span",{className:b.isPartialTime?"font-medium text-blue-600":"",children:[b.effectiveRequiredTime?.toFixed(1)||b.completion_time?.toFixed(1)||0,"h"]}),b.isPartialTime&&t.jsxs("div",{className:"text-xs text-gray-500",children:["(",((b.partialRequiredTime||0)/(b.completion_time||1)*100).toFixed(1),"% of total)"]})]}),t.jsxs("td",{className:"px-4 py-2 text-sm text-gray-600",children:["Level ",b.importance||1]}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:b.root_category})]},b.id))})]})}),w=()=>t.jsx("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-start justify-center bg-black p-4 pt-8",children:t.jsxs("div",{className:"mx-auto max-h-[90vh] w-full max-w-6xl overflow-y-auto rounded-lg bg-white shadow-lg",children:[t.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between border-b border-gray-200 bg-white px-6 py-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 sm:text-2xl",children:"Time Availability Report"}),t.jsx("button",{onClick:()=>l(!1),className:"text-2xl font-bold text-gray-500 hover:text-gray-800","aria-label":"Close modal",children:"Ã—"})]}),t.jsxs("div",{className:"space-y-6 p-6",children:[t.jsx(q,{}),t.jsxs("div",{children:[t.jsx("h3",{className:"mb-3 text-lg font-semibold text-gray-800",children:"Task Breakdown"}),t.jsx(B,{})]})]})]})});return t.jsxs(t.Fragment,{children:[t.jsx("aside",{className:"aside",children:t.jsxs("div",{className:"flex flex-col items-center space-y-2 text-sm text-white",children:[t.jsx(C,{}),t.jsx(_,{}),t.jsx(O,{}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(S,{}),t.jsx(F,{})]})]})}),i&&t.jsx(w,{}),t.jsx(Nr,{isOpen:c,onClose:()=>x(!1)})]})}function Tr({isOpen:e,onClose:r}){return e?t.jsxs("div",{className:"fixed inset-0 z-50",children:[t.jsx("div",{className:"bg-opacity-50 fixed inset-0 bg-black",onClick:r}),t.jsxs("div",{className:"fixed inset-4 flex max-h-full flex-col rounded-lg bg-white shadow-xl dark:bg-gray-800",children:[t.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 p-4 dark:border-gray-600",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Time Report"}),t.jsx("button",{onClick:r,className:"text-2xl text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close",children:"Ã—"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t.jsx(Cr,{})})]})]}):null}function ut(e){var r,o,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(r=0;r<n;r++)e[r]&&(o=ut(e[r]))&&(s&&(s+=" "),s+=o)}else for(o in e)e[o]&&(s&&(s+=" "),s+=o);return s}function Sr(){for(var e,r,o=0,s="",n=arguments.length;o<n;o++)(e=arguments[o])&&(r=ut(e))&&(s&&(s+=" "),s+=r);return s}const De="-",_r=e=>{const r=Dr(e),{conflictingClassGroups:o,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:i=>{const l=i.split(De);return l[0]===""&&l.length!==1&&l.shift(),mt(l,r)||Rr(i)},getConflictingClassGroupIds:(i,l)=>{const c=o[i]||[];return l&&s[i]?[...c,...s[i]]:c}}},mt=(e,r)=>{if(e.length===0)return r.classGroupId;const o=e[0],s=r.nextPart.get(o),n=s?mt(e.slice(1),s):void 0;if(n)return n;if(r.validators.length===0)return;const a=e.join(De);return r.validators.find(({validator:i})=>i(a))?.classGroupId},Be=/^\[(.+)\]$/,Rr=e=>{if(Be.test(e)){const r=Be.exec(e)[1],o=r?.substring(0,r.indexOf(":"));if(o)return"arbitrary.."+o}},Dr=e=>{const{theme:r,classGroups:o}=e,s={nextPart:new Map,validators:[]};for(const n in o)ke(o[n],s,n,r);return s},ke=(e,r,o,s)=>{e.forEach(n=>{if(typeof n=="string"){const a=n===""?r:Qe(r,n);a.classGroupId=o;return}if(typeof n=="function"){if(Mr(n)){ke(n(s),r,o,s);return}r.validators.push({validator:n,classGroupId:o});return}Object.entries(n).forEach(([a,i])=>{ke(i,Qe(r,a),o,s)})})},Qe=(e,r)=>{let o=e;return r.split(De).forEach(s=>{o.nextPart.has(s)||o.nextPart.set(s,{nextPart:new Map,validators:[]}),o=o.nextPart.get(s)}),o},Mr=e=>e.isThemeGetter,Ar=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,o=new Map,s=new Map;const n=(a,i)=>{o.set(a,i),r++,r>e&&(r=0,s=o,o=new Map)};return{get(a){let i=o.get(a);if(i!==void 0)return i;if((i=s.get(a))!==void 0)return n(a,i),i},set(a,i){o.has(a)?o.set(a,i):n(a,i)}}},Ne="!",Ce=":",Lr=Ce.length,Er=e=>{const{prefix:r,experimentalParseClassName:o}=e;let s=n=>{const a=[];let i=0,l=0,c=0,x;for(let N=0;N<n.length;N++){let g=n[N];if(i===0&&l===0){if(g===Ce){a.push(n.slice(c,N)),c=N+Lr;continue}if(g==="/"){x=N;continue}}g==="["?i++:g==="]"?i--:g==="("?l++:g===")"&&l--}const v=a.length===0?n:n.substring(c),f=Or(v),h=f!==v,k=x&&x>c?x-c:void 0;return{modifiers:a,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:k}};if(r){const n=r+Ce,a=s;s=i=>i.startsWith(n)?a(i.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(o){const n=s;s=a=>o({className:a,parseClassName:n})}return s},Or=e=>e.endsWith(Ne)?e.substring(0,e.length-1):e.startsWith(Ne)?e.substring(1):e,$r=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const n=[];let a=[];return s.forEach(i=>{i[0]==="["||r[i]?(n.push(...a.sort(),i),a=[]):a.push(i)}),n.push(...a.sort()),n}},Pr=e=>({cache:Ar(e.cacheSize),parseClassName:Er(e),sortModifiers:$r(e),..._r(e)}),Ir=/\s+/,Fr=(e,r)=>{const{parseClassName:o,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:a}=r,i=[],l=e.trim().split(Ir);let c="";for(let x=l.length-1;x>=0;x-=1){const v=l[x],{isExternal:f,modifiers:h,hasImportantModifier:k,baseClassName:N,maybePostfixModifierPosition:g}=o(v);if(f){c=v+(c.length>0?" "+c:c);continue}let j=!!g,C=s(j?N.substring(0,g):N);if(!C){if(!j){c=v+(c.length>0?" "+c:c);continue}if(C=s(N),!C){c=v+(c.length>0?" "+c:c);continue}j=!1}const _=a(h).join(":"),O=k?_+Ne:_,S=O+C;if(i.includes(S))continue;i.push(S);const F=n(C,j);for(let q=0;q<F.length;++q){const B=F[q];i.push(O+B)}c=v+(c.length>0?" "+c:c)}return c};function zr(){let e=0,r,o,s="";for(;e<arguments.length;)(r=arguments[e++])&&(o=xt(r))&&(s&&(s+=" "),s+=o);return s}const xt=e=>{if(typeof e=="string")return e;let r,o="";for(let s=0;s<e.length;s++)e[s]&&(r=xt(e[s]))&&(o&&(o+=" "),o+=r);return o};function qr(e,...r){let o,s,n,a=i;function i(c){const x=r.reduce((v,f)=>f(v),e());return o=Pr(x),s=o.cache.get,n=o.cache.set,a=l,l(c)}function l(c){const x=s(c);if(x)return x;const v=Fr(c,o);return n(c,v),v}return function(){return a(zr.apply(null,arguments))}}const M=e=>{const r=o=>o[e]||[];return r.isThemeGetter=!0,r},ht=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gt=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ur=/^\d+\/\d+$/,Br=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Qr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Wr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Hr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Y=e=>Ur.test(e),T=e=>!!e&&!Number.isNaN(Number(e)),V=e=>!!e&&Number.isInteger(Number(e)),ye=e=>e.endsWith("%")&&T(e.slice(0,-1)),G=e=>Br.test(e),Vr=()=>!0,Kr=e=>Qr.test(e)&&!Gr.test(e),ft=()=>!1,Jr=e=>Wr.test(e),Yr=e=>Hr.test(e),Xr=e=>!u(e)&&!m(e),Zr=e=>X(e,yt,ft),u=e=>ht.test(e),J=e=>X(e,vt,Kr),ve=e=>X(e,os,T),Ge=e=>X(e,pt,ft),es=e=>X(e,bt,Yr),ce=e=>X(e,wt,Jr),m=e=>gt.test(e),ee=e=>Z(e,vt),ts=e=>Z(e,ns),We=e=>Z(e,pt),rs=e=>Z(e,yt),ss=e=>Z(e,bt),de=e=>Z(e,wt,!0),X=(e,r,o)=>{const s=ht.exec(e);return s?s[1]?r(s[1]):o(s[2]):!1},Z=(e,r,o=!1)=>{const s=gt.exec(e);return s?s[1]?r(s[1]):o:!1},pt=e=>e==="position"||e==="percentage",bt=e=>e==="image"||e==="url",yt=e=>e==="length"||e==="size"||e==="bg-size",vt=e=>e==="length",os=e=>e==="number",ns=e=>e==="family-name",wt=e=>e==="shadow",as=()=>{const e=M("color"),r=M("font"),o=M("text"),s=M("font-weight"),n=M("tracking"),a=M("leading"),i=M("breakpoint"),l=M("container"),c=M("spacing"),x=M("radius"),v=M("shadow"),f=M("inset-shadow"),h=M("text-shadow"),k=M("drop-shadow"),N=M("blur"),g=M("perspective"),j=M("aspect"),C=M("ease"),_=M("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],F=()=>[...S(),m,u],q=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],w=()=>[m,u,c],b=()=>[Y,"full","auto",...w()],$=()=>[V,"none","subgrid",m,u],U=()=>["auto",{span:["full",V,m,u]},V,m,u],H=()=>[V,"auto",m,u],y=()=>["auto","min","max","fr",m,u],D=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],R=()=>["start","end","center","stretch","center-safe","end-safe"],E=()=>["auto",...w()],P=()=>[Y,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],d=()=>[e,m,u],te=()=>[...S(),We,Ge,{position:[m,u]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",rs,Zr,{size:[m,u]}],fe=()=>[ye,ee,J],I=()=>["","none","full",x,m,u],z=()=>["",T,ee,J],oe=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>[T,ye,We,Ge],Ae=()=>["","none",N,m,u],ne=()=>["none",T,m,u],ae=()=>["none",T,m,u],pe=()=>[T,m,u],ie=()=>[Y,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[G],breakpoint:[G],color:[Vr],container:[G],"drop-shadow":[G],ease:["in","out","in-out"],font:[Xr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[G],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[G],shadow:[G],spacing:["px",T],text:[G],"text-shadow":[G],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Y,u,m,j]}],container:["container"],columns:[{columns:[T,u,m,l]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:F()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:b()}],"inset-x":[{"inset-x":b()}],"inset-y":[{"inset-y":b()}],start:[{start:b()}],end:[{end:b()}],top:[{top:b()}],right:[{right:b()}],bottom:[{bottom:b()}],left:[{left:b()}],visibility:["visible","invisible","collapse"],z:[{z:[V,"auto",m,u]}],basis:[{basis:[Y,"full","auto",l,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[T,Y,"auto","initial","none",u]}],grow:[{grow:["",T,m,u]}],shrink:[{shrink:["",T,m,u]}],order:[{order:[V,"first","last","none",m,u]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":y()}],"auto-rows":[{"auto-rows":y()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...D(),"normal"]}],"justify-items":[{"justify-items":[...R(),"normal"]}],"justify-self":[{"justify-self":["auto",...R()]}],"align-content":[{content:["normal",...D()]}],"align-items":[{items:[...R(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...R(),{baseline:["","last"]}]}],"place-content":[{"place-content":D()}],"place-items":[{"place-items":[...R(),"baseline"]}],"place-self":[{"place-self":["auto",...R()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:P()}],w:[{w:[l,"screen",...P()]}],"min-w":[{"min-w":[l,"screen","none",...P()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...P()]}],h:[{h:["screen","lh",...P()]}],"min-h":[{"min-h":["screen","lh","none",...P()]}],"max-h":[{"max-h":["screen","lh",...P()]}],"font-size":[{text:["base",o,ee,J]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,m,ve]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ye,u]}],"font-family":[{font:[ts,u,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,m,u]}],"line-clamp":[{"line-clamp":[T,"none",m,ve]}],leading:[{leading:[a,...w()]}],"list-image":[{"list-image":["none",m,u]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",m,u]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:d()}],"text-color":[{text:d()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...oe(),"wavy"]}],"text-decoration-thickness":[{decoration:[T,"from-font","auto",m,J]}],"text-decoration-color":[{decoration:d()}],"underline-offset":[{"underline-offset":[T,"auto",m,u]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",m,u]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",m,u]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},V,m,u],radial:["",m,u],conic:[V,m,u]},ss,es]}],"bg-color":[{bg:d()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:d()}],"gradient-via":[{via:d()}],"gradient-to":[{to:d()}],rounded:[{rounded:I()}],"rounded-s":[{"rounded-s":I()}],"rounded-e":[{"rounded-e":I()}],"rounded-t":[{"rounded-t":I()}],"rounded-r":[{"rounded-r":I()}],"rounded-b":[{"rounded-b":I()}],"rounded-l":[{"rounded-l":I()}],"rounded-ss":[{"rounded-ss":I()}],"rounded-se":[{"rounded-se":I()}],"rounded-ee":[{"rounded-ee":I()}],"rounded-es":[{"rounded-es":I()}],"rounded-tl":[{"rounded-tl":I()}],"rounded-tr":[{"rounded-tr":I()}],"rounded-br":[{"rounded-br":I()}],"rounded-bl":[{"rounded-bl":I()}],"border-w":[{border:z()}],"border-w-x":[{"border-x":z()}],"border-w-y":[{"border-y":z()}],"border-w-s":[{"border-s":z()}],"border-w-e":[{"border-e":z()}],"border-w-t":[{"border-t":z()}],"border-w-r":[{"border-r":z()}],"border-w-b":[{"border-b":z()}],"border-w-l":[{"border-l":z()}],"divide-x":[{"divide-x":z()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":z()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...oe(),"hidden","none"]}],"divide-style":[{divide:[...oe(),"hidden","none"]}],"border-color":[{border:d()}],"border-color-x":[{"border-x":d()}],"border-color-y":[{"border-y":d()}],"border-color-s":[{"border-s":d()}],"border-color-e":[{"border-e":d()}],"border-color-t":[{"border-t":d()}],"border-color-r":[{"border-r":d()}],"border-color-b":[{"border-b":d()}],"border-color-l":[{"border-l":d()}],"divide-color":[{divide:d()}],"outline-style":[{outline:[...oe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[T,m,u]}],"outline-w":[{outline:["",T,ee,J]}],"outline-color":[{outline:d()}],shadow:[{shadow:["","none",v,de,ce]}],"shadow-color":[{shadow:d()}],"inset-shadow":[{"inset-shadow":["none",f,de,ce]}],"inset-shadow-color":[{"inset-shadow":d()}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:d()}],"ring-offset-w":[{"ring-offset":[T,J]}],"ring-offset-color":[{"ring-offset":d()}],"inset-ring-w":[{"inset-ring":z()}],"inset-ring-color":[{"inset-ring":d()}],"text-shadow":[{"text-shadow":["none",h,de,ce]}],"text-shadow-color":[{"text-shadow":d()}],opacity:[{opacity:[T,m,u]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[T]}],"mask-image-linear-from-pos":[{"mask-linear-from":A()}],"mask-image-linear-to-pos":[{"mask-linear-to":A()}],"mask-image-linear-from-color":[{"mask-linear-from":d()}],"mask-image-linear-to-color":[{"mask-linear-to":d()}],"mask-image-t-from-pos":[{"mask-t-from":A()}],"mask-image-t-to-pos":[{"mask-t-to":A()}],"mask-image-t-from-color":[{"mask-t-from":d()}],"mask-image-t-to-color":[{"mask-t-to":d()}],"mask-image-r-from-pos":[{"mask-r-from":A()}],"mask-image-r-to-pos":[{"mask-r-to":A()}],"mask-image-r-from-color":[{"mask-r-from":d()}],"mask-image-r-to-color":[{"mask-r-to":d()}],"mask-image-b-from-pos":[{"mask-b-from":A()}],"mask-image-b-to-pos":[{"mask-b-to":A()}],"mask-image-b-from-color":[{"mask-b-from":d()}],"mask-image-b-to-color":[{"mask-b-to":d()}],"mask-image-l-from-pos":[{"mask-l-from":A()}],"mask-image-l-to-pos":[{"mask-l-to":A()}],"mask-image-l-from-color":[{"mask-l-from":d()}],"mask-image-l-to-color":[{"mask-l-to":d()}],"mask-image-x-from-pos":[{"mask-x-from":A()}],"mask-image-x-to-pos":[{"mask-x-to":A()}],"mask-image-x-from-color":[{"mask-x-from":d()}],"mask-image-x-to-color":[{"mask-x-to":d()}],"mask-image-y-from-pos":[{"mask-y-from":A()}],"mask-image-y-to-pos":[{"mask-y-to":A()}],"mask-image-y-from-color":[{"mask-y-from":d()}],"mask-image-y-to-color":[{"mask-y-to":d()}],"mask-image-radial":[{"mask-radial":[m,u]}],"mask-image-radial-from-pos":[{"mask-radial-from":A()}],"mask-image-radial-to-pos":[{"mask-radial-to":A()}],"mask-image-radial-from-color":[{"mask-radial-from":d()}],"mask-image-radial-to-color":[{"mask-radial-to":d()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[T]}],"mask-image-conic-from-pos":[{"mask-conic-from":A()}],"mask-image-conic-to-pos":[{"mask-conic-to":A()}],"mask-image-conic-from-color":[{"mask-conic-from":d()}],"mask-image-conic-to-color":[{"mask-conic-to":d()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",m,u]}],filter:[{filter:["","none",m,u]}],blur:[{blur:Ae()}],brightness:[{brightness:[T,m,u]}],contrast:[{contrast:[T,m,u]}],"drop-shadow":[{"drop-shadow":["","none",k,de,ce]}],"drop-shadow-color":[{"drop-shadow":d()}],grayscale:[{grayscale:["",T,m,u]}],"hue-rotate":[{"hue-rotate":[T,m,u]}],invert:[{invert:["",T,m,u]}],saturate:[{saturate:[T,m,u]}],sepia:[{sepia:["",T,m,u]}],"backdrop-filter":[{"backdrop-filter":["","none",m,u]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[T,m,u]}],"backdrop-contrast":[{"backdrop-contrast":[T,m,u]}],"backdrop-grayscale":[{"backdrop-grayscale":["",T,m,u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[T,m,u]}],"backdrop-invert":[{"backdrop-invert":["",T,m,u]}],"backdrop-opacity":[{"backdrop-opacity":[T,m,u]}],"backdrop-saturate":[{"backdrop-saturate":[T,m,u]}],"backdrop-sepia":[{"backdrop-sepia":["",T,m,u]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",m,u]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[T,"initial",m,u]}],ease:[{ease:["linear","initial",C,m,u]}],delay:[{delay:[T,m,u]}],animate:[{animate:["none",_,m,u]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,m,u]}],"perspective-origin":[{"perspective-origin":F()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:ae()}],"scale-x":[{"scale-x":ae()}],"scale-y":[{"scale-y":ae()}],"scale-z":[{"scale-z":ae()}],"scale-3d":["scale-3d"],skew:[{skew:pe()}],"skew-x":[{"skew-x":pe()}],"skew-y":[{"skew-y":pe()}],transform:[{transform:[m,u,"","none","gpu","cpu"]}],"transform-origin":[{origin:F()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:d()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:d()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",m,u]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",m,u]}],fill:[{fill:["none",...d()]}],"stroke-w":[{stroke:[T,ee,J,ve]}],stroke:[{stroke:["none",...d()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},is=qr(as);function ls(...e){return is(Sr(e))}function jt({onClick:e,showLabel:r=!1,className:o}){return t.jsxs("button",{onClick:e,className:ls("flex items-center space-x-1 rounded p-2 text-gray-300 transition-colors hover:text-white",!r&&"justify-center",o),title:"Quick Add Task",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r&&t.jsx("span",{className:"hidden text-sm sm:inline",children:"Quick Add"})]})}function kt({onClick:e}){return t.jsxs("button",{onClick:e,className:"text-gray-300 hover:text-white transition-colors flex items-center space-x-1",title:"Tasks Due Today",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2 2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("span",{className:"hidden sm:inline text-sm",children:"Today"})]})}function cs({onOpenTasksDueToday:e,onOpenQuickAdd:r,onOpenTimeReport:o,onOpenHamburger:s}){return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[t.jsx("button",{onClick:s,className:"rounded p-2 text-gray-300 transition-colors hover:text-white","aria-label":"Open navigation menu",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ye,{}),t.jsx(kt,{onClick:e}),t.jsx("button",{onClick:o,children:"â±ï¸"}),t.jsx(jt,{onClick:r})]})]})})}function ds({onTaskClick:e}){const[r,o]=p.useState(!1),s=p.useRef(null),{data:n,isLoading:a}=ct();p.useEffect(()=>{function c(x){s.current&&!s.current.contains(x.target)&&o(!1)}if(r)return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[r]);const i=c=>{o(!1),e(c)},l=n?.length??0;return t.jsxs("div",{className:"relative",ref:s,children:[t.jsxs("button",{onClick:()=>o(!r),className:"flex items-center space-x-1 text-gray-300 transition-colors hover:text-white",title:"Recent Tasks",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"hidden text-sm sm:inline",children:"Recent"}),l>0&&t.jsx("span",{className:"flex h-5 min-w-5 items-center justify-center rounded-full bg-blue-600 px-1.5 text-xs font-bold text-white",children:l})]}),r&&t.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-gray-700 bg-gray-800 shadow-xl",children:[t.jsxs("div",{className:"border-b border-gray-700 px-4 py-3",children:[t.jsx("h3",{className:"font-semibold text-white",children:"Recently Touched Tasks"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Last 10 tasks you've created, edited, or viewed"})]}),t.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[a&&t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"h-6 w-6 animate-spin rounded-full border-b-2 border-blue-600"})}),!a&&l===0&&t.jsx("div",{className:"py-8 text-center",children:t.jsx("p",{className:"text-sm text-gray-400",children:"No recent tasks yet"})}),!a&&l>0&&t.jsx("ul",{className:"divide-y divide-gray-700",children:n?.map(c=>t.jsx("li",{children:t.jsxs("button",{onClick:()=>i(c),className:"w-full px-4 py-3 text-left transition-colors hover:bg-gray-700/50",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-white",children:c.name}),t.jsxs("p",{className:"text-xs text-gray-400",children:[c.root_category,c.deadline&&t.jsxs(t.Fragment,{children:[" ","â€¢ Due"," ",new Date(c.deadline).toLocaleDateString()]})]})]}),c.importance&&c.importance>=8&&t.jsx("span",{className:"ml-2 flex-shrink-0 text-xs text-purple-400",children:"â˜…"})]}),c.last_touched_at&&t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:us(c.last_touched_at)})]})},c.id))})]})]})]})}function us(e){const r=new Date(e),s=Math.floor((new Date().getTime()-r.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:r.toLocaleDateString()}function ms({onOpenTasksDueToday:e,onOpenQuickAdd:r,onOpenHamburger:o,activeTab:s,onRecentTaskClick:n}){return t.jsx("div",{className:"border-b border-gray-700/50 bg-gray-900/95 shadow-md backdrop-blur-sm dark:border-gray-600/50 dark:bg-gray-800/95",children:t.jsxs("div",{className:"mx-auto flex max-w-[1800px] items-center justify-between px-6 py-3",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs(ue,{to:"/",className:"flex items-center gap-2 rounded-lg px-3 py-2 text-base font-semibold text-gray-300 transition-all hover:bg-gray-800/60 hover:text-white dark:hover:bg-gray-700/60",children:[t.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),t.jsx("span",{children:"Home"})]}),t.jsx("div",{className:"block min-[1000px]:hidden",children:t.jsx("button",{onClick:o,className:"rounded-lg p-2 text-gray-300 transition-colors hover:bg-gray-800/60 hover:text-white","aria-label":"Open navigation menu",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),t.jsx("div",{className:"hidden min-[1000px]:block",children:t.jsx(lt,{activeTab:s,variant:"desktop"})})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ye,{}),t.jsx(ds,{onTaskClick:n}),t.jsx(kt,{onClick:e}),t.jsx(jt,{onClick:r,showLabel:!0,className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600"})]})]})})}const xs=new Pt,hs=["Household","Finances","Cleo","Job","Social","Personal","Orphans"];function gs(){const{tabName:e}=Ct(),r=e||"Household",[o,s]=p.useState(!1),[n,a]=p.useState(!1),[i,l]=p.useState(void 0),[c,x]=p.useState(!1),[v,f]=p.useState(!1),h=ot(),k=C=>{l(C.id),a(!0)},{data:N,isLoading:g,error:j}=he({queryKey:["orgTree",r],queryFn:()=>Re(r),placeholderData:Ve});return e&&!hs.includes(e)?t.jsx(Tt,{to:"/org-chart/Household",replace:!0}):t.jsxs("div",{className:"app-layout",children:[t.jsx("nav",{className:"nav sticky top-0 z-40 bg-gray-900 dark:bg-gray-800",children:h?t.jsx(cs,{onOpenTasksDueToday:()=>s(!0),onOpenTimeReport:()=>x(!0),onOpenQuickAdd:()=>a(!0),onOpenHamburger:()=>f(!0)}):t.jsx(ms,{onOpenTasksDueToday:()=>s(!0),onOpenQuickAdd:()=>a(!0),onOpenHamburger:()=>f(!0),activeTab:r,onRecentTaskClick:k})}),t.jsxs("main",{className:"main p-4",children:[g&&t.jsxs("div",{className:"text-gray-900 dark:text-gray-100",children:["Loading ",r," tree..."]}),j&&t.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Error loading ",r," tree"]}),N&&t.jsx(tr,{tabName:r})]}),o&&t.jsx(lr,{isOpen:o,onClose:()=>s(!1)}),n&&t.jsx(rr,{isOpen:n,onClose:()=>{a(!1),l(void 0)},initialTaskId:i}),c&&t.jsx(Tr,{isOpen:c,onClose:()=>x(!1)}),v&&t.jsx(ur,{isOpen:v,onClose:()=>f(!1),activeTab:r})]})}const Cs=Nt(function(){return t.jsx(Ut,{children:t.jsx(It,{client:xs,children:t.jsx(gs,{})})})});export{Cs as default};
