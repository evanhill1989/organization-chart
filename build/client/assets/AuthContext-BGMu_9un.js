import{a as o,p as w}from"./chunk-PVWAREVJ-C9qE2fA-.js";import{s as r}from"./supabaseClient-BIEPa1cA.js";const u=o.createContext(void 0);function b({children:e}){const[c,a]=o.useState(null),[h,i]=o.useState(!0);o.useEffect(()=>{r.auth.getSession().then(({data:{session:s}})=>{a(s?.user??null),i(!1)});const{data:{subscription:t}}=r.auth.onAuthStateChange((s,n)=>{a(n?.user??null),i(!1)});return()=>t.unsubscribe()},[]);const d={user:c,loading:h,signUp:async(t,s)=>{const{error:n}=await r.auth.signUp({email:t,password:s,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});return{error:n}},signIn:async(t,s)=>{const{error:n}=await r.auth.signInWithPassword({email:t,password:s});return{error:n}},signInWithOAuth:async t=>{const{error:s}=await r.auth.signInWithOAuth({provider:t,options:{redirectTo:`${window.location.origin}/auth/callback`}});if(s)throw console.error(`OAuth error (${t}):`,s.message),s},signOut:async()=>{const{error:t}=await r.auth.signOut();if(t)throw console.error("Sign out error:",t.message),t},resetPassword:async t=>{const{error:s}=await r.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/reset-password`});return{error:s}},updatePassword:async t=>{const{error:s}=await r.auth.updateUser({password:t});return{error:s}}};return w.jsx(u.Provider,{value:d,children:e})}function O(){const e=o.useContext(u);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}export{b as A,O as u};
